<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/color.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="cordova.html">

<!--
`cordova-network`


@demo demo/index.html 
-->

<dom-module id="cordova-network">
  <style include="iron-flex iron-flex-alignment"></style>
  <template>
    <style>
      :host {
        display: block;
      }

      .row {
          @apply(--layout-horizontal);
          @apply(--layout-flex);
      }
      .row span {
        margin-right: 5px;
      }
      .row .label {
      }
      .row .value {
          @apply(--paper-font-common-nowrap);   
          color: var(--paper-purple-500);
      }
      .check {
        color: var(--google-blue-500);
      }

    </style>
      <paper-card elevation="2" heading="Nework Info">
        <div class="card-content">  

        <div class="row">
          <span class="label">Connection:</span>
          <span class="value">[[status]]</span>
        </div> 
            
        </div>
        <div class="card-actions">
          <paper-button class="check" on-tap="check">Check</paper-button>
        </div>
      </paper-card>
 
  </template>

  <script>
    Polymer({

      is: 'cordova-network',

      properties: {
        status: {
          type: String,
          value: 'Unknown',
        },
      },
      ready: function(e) {

        var self = this;

        document.addEventListener("deviceready", function() {
          self.check( e );
        });
      },
      check: function() {

        console.log( "Check Network");
        var networkState = navigator.network.connection.type;

        var states = {};
        states[Connection.UNKNOWN]  = 'Unknown';
        states[Connection.ETHERNET] = 'Ethernet';
        states[Connection.WIFI]     = 'WiFi';
        states[Connection.CELL_2G]  = 'Cell 2G';
        states[Connection.CELL_3G]  = 'Cell 3G';
        states[Connection.CELL_4G]  = 'Cell 4G';
        states[Connection.NONE]     = 'No network';

        this.status =  states[networkState];

        //confirm('Connection type:\n ' + states[networkState]);
      }
    });
  </script>
</dom-module>
